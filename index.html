<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>한국 공휴일 달력 및 근무표</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-size: cover;
            background-position: center;
            transition: background-image 0.5s ease-in-out;
        }
        .container {
            display: flex;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .calendar-container {
            margin-right: 20px;
        }
        table {
            border-collapse: collapse;
        }
        th, td {
            width: 40px;
            height: 40px;
            text-align: center;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
        .sunday, .holiday {
            color: red;
        }
        .saturday {
            color: blue;
        }
        .holiday {
            background-color: #ffdddd;
        }
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        button {
            padding: 5px 10px;
            cursor: pointer;
        }
        #yearMonth {
            font-size: 18px;
            font-weight: bold;
        }
        .input-container {
            margin-bottom: 20px;
        }
        input {
            padding: 5px;
            margin-right: 10px;
        }
        .duty-roster {
            width: 600px;
        }
        .duty-roster table {
            width: 100%;
            margin-bottom: 10px;
        }
        .duty-roster th, .duty-roster td {
            padding: 5px;
            width: auto;
        }
        .duty-roster input {
            width: 90%;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="calendar-container">
            <div class="input-container">
                <input type="month" id="startDate" min="2024-01" max="2025-12">
                <input type="month" id="endDate" min="2024-01" max="2025-12">
                <button id="applyDates">적용</button>
            </div>
            <div class="controls">
                <button id="prevMonth">&lt;</button>
                <span id="yearMonth"></span>
                <button id="nextMonth">&gt;</button>
            </div>
            <table id="calendar">
                <thead>
                    <tr>
                        <th class="sunday">일</th>
                        <th>월</th>
                        <th>화</th>
                        <th>수</th>
                        <th>목</th>
                        <th>금</th>
                        <th class="saturday">토</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
        <div class="duty-roster">
            <h2>근무표 작성</h2>
            <table id="dutyRosterTable">
                <thead>
                    <tr>
                        <th>주말_당직관</th>
                        <th>주말_부당직관</th>
                        <th>주말_당직원</th>
                        <th>평일_당직관</th>
                        <th>평일_당직원</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
            <button id="addRow">+ 행 추가</button>
            <button id="saveRoster">저장</button>
        </div>
    </div>

    <script>
        const holidays = {
            "2024-01-01": "1월 1일",
            "2024-02-09": "설날 전날",
            "2024-02-10": "설날",
            "2024-02-11": "설날 다음 날",
            "2024-02-12": "대체공휴일(설날)",
            "2024-03-01": "3ㆍ1절",
            "2024-04-10": "제22대국회의원선거",
            "2024-05-05": "어린이날",
            "2024-05-06": "대체공휴일(어린이날)",
            "2024-05-15": "부처님 오신 날",
            "2024-06-06": "현충일",
            "2024-08-15": "광복절",
            "2024-09-16": "추석 전날",
            "2024-09-17": "추석",
            "2024-09-18": "추석 다음 날",
            "2024-10-03": "개천절",
            "2024-10-09": "한글날",
            "2024-12-25": "기독탄신일",
            "2025-01-01": "1월 1일",
            "2025-01-28": "설날 전날",
            "2025-01-29": "설날",
            "2025-01-30": "설날 다음 날",
            "2025-03-01": "3ㆍ1절",
            "2025-03-03": "대체공휴일(3ㆍ1절)",
            "2025-05-05": "어린이날",
            "2025-05-06": "대체공휴일(부처님 오신 날)",
            "2025-06-06": "현충일",
            "2025-08-15": "광복절",
            "2025-10-03": "개천절",
            "2025-10-05": "추석 전날",
            "2025-10-06": "추석",
            "2025-10-07": "추석 다음 날",
            "2025-10-08": "대체공휴일(추석)",
            "2025-10-09": "한글날",
            "2025-12-25": "기독탄신일"
        };

        const backgroundImages = {
            0: "/api/placeholder/1920/1080?text=January+Space+Background",
            1: "/api/placeholder/1920/1080?text=February+Space+Background",
            2: "/api/placeholder/1920/1080?text=March+Space+Background",
            3: "/api/placeholder/1920/1080?text=April+Space+Background",
            4: "/api/placeholder/1920/1080?text=May+Space+Background",
            5: "/api/placeholder/1920/1080?text=June+Space+Background",
            6: "/api/placeholder/1920/1080?text=July+Space+Background",
            7: "/api/placeholder/1920/1080?text=August+Space+Background",
            8: "/api/placeholder/1920/1080?text=September+Space+Background",
            9: "/api/placeholder/1920/1080?text=October+Space+Background",
            10: "/api/placeholder/1920/1080?text=November+Space+Background",
            11: "/api/placeholder/1920/1080?text=December+Space+Background"
        };

        let currentYear, currentMonth;
        let startDate, endDate;

        function initCalendar() {
            const now = new Date();
            currentYear = now.getFullYear();
            currentMonth = now.getMonth();
            startDate = new Date(2024, 0, 1);
            endDate = new Date(2025, 11, 31);
            document.getElementById('startDate').value = '2024-01';
            document.getElementById('endDate').value = '2025-12';
            updateCalendar();
        }

        function updateCalendar() {
            const yearMonthElement = document.getElementById('yearMonth');
            const calendarBody = document.querySelector('#calendar tbody');
            
            yearMonthElement.textContent = `${currentYear}년 ${currentMonth + 1}월`;
            calendarBody.innerHTML = '';

            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            
            document.body.style.backgroundImage = `url('${backgroundImages[currentMonth]}')`;

            let date = 1;
            for (let i = 0; i < 6; i++) {
                const row = document.createElement('tr');
                for (let j = 0; j < 7; j++) {
                    const cell = document.createElement('td');
                    if (i === 0 && j < firstDay.getDay() || date > lastDay.getDate()) {
                        cell.textContent = '';
                    } else {
                        cell.textContent = date;
                        if (j === 0) cell.classList.add('sunday');
                        if (j === 6) cell.classList.add('saturday');
                        
                        const currentDate = new Date(currentYear, currentMonth, date);
                        const dateString = currentDate.toISOString().split('T')[0];
                        
                        if (holidays[dateString]) {
                            cell.classList.add('holiday');
                            cell.title = holidays[dateString];
                        }
                        
                        date++;
                    }
                    row.appendChild(cell);
                }
                calendarBody.appendChild(row);
                if (date > lastDay.getDate()) break;
            }
        }

        document.getElementById('prevMonth').addEventListener('click', () => {
            if (new Date(currentYear, currentMonth) > startDate) {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                updateCalendar();
            }
        });

        document.getElementById('nextMonth').addEventListener('click', () => {
            if (new Date(currentYear, currentMonth) < endDate) {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                updateCalendar();
            }
        });

        document.getElementById('applyDates').addEventListener('click', () => {
            const newStartDate = new Date(document.getElementById('startDate').value);
            const newEndDate = new Date(document.getElementById('endDate').value);
            
            if (newStartDate < new Date(2024, 0, 1) || newEndDate > new Date(2025, 11, 31)) {
                alert('날짜는 2024년 1월부터 2025년 12월 사이여야 합니다.');
                return;
            }
            
            startDate = newStartDate;
            endDate = new Date(newEndDate.getFullYear(), newEndDate.getMonth() + 1, 0);
            currentYear = startDate.getFullYear();
            currentMonth = startDate.getMonth();
            updateCalendar();
        });

        function createDutyRosterRow() {
            const row = document.createElement('tr');
            const fields = ['주말_당직관', '주말_부당직관', '주말_당직원', '평일_당직관', '평일_당직원'];
            fields.forEach(field => {
                const cell = document.createElement('td');
                const input = document.createElement('input');
                input.type = 'text';
                input.name = field;
                cell.appendChild(input);
                row.appendChild(cell);
            });
            const actionCell = document.createElement('td');
            const deleteButton = document.createElement('button');
            deleteButton.textContent = '-';
            deleteButton.onclick = function() { row.remove(); };
            actionCell.appendChild(deleteButton);
            row.appendChild(actionCell);
            return row;
        }

        document.getElementById('addRow').addEventListener('click', () => {
            const tbody = document.querySelector('#dutyRosterTable tbody');
            tbody.appendChild(createDutyRosterRow());
        });

        document.getElementById('saveRoster').addEventListener('click', () => {
            const rows = document.querySelectorAll('#dutyRosterTable tbody tr');
            const data = Array.from(rows).map(row => {
                const inputs = row.querySelectorAll('input');
                return Array.from(inputs).reduce((obj, input) => {
                    obj[input.name] = input.value;
                    return obj;
                }, {});
            });
            localStorage.setItem('dutyRoster', JSON.stringify(data));
            alert('근무표가 저장되었습니다.');
        });

        function loadDutyRoster() {
            const savedData = localStorage.getItem('dutyRoster');
            if (savedData) {
                const data = JSON.parse(savedData);
                const tbody = document.querySelector('#dutyRosterTable tbody');
                tbody.innerHTML = '';
                data.forEach(rowData => {
                    const row = createDutyRosterRow();
                    Object.entries(rowData).forEach(([key, value]) => {
                        row.querySelector(`input[name="${key}"]`).value = value;
                    });
                    tbody.appendChild(row);
                });
            }
        }

        initCalendar();
        loadDutyRoster();
    </script>
</body>
</html>
